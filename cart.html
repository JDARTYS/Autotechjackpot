<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Your Cart - Autotechjackpot</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="index.html" aria-label="Go to Home page">AutoTechJackpot</a>
            </div>
            <nav>
                <a href="index.html" aria-label="Home Page">Home</a>
                <a href="tickets.html" aria-label="Tickets Page">Tickets</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="cart">
            <h1>Your Cart</h1>
            <div id="cart-items">
                <!-- Cart items will be dynamically loaded here -->
            </div>
            <div id="cart-summary">
                <p>Total: €<span id="total-price">0.00</span></p>
                <button id="checkout-button">Proceed to Checkout</button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Autotechjackpot. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
  loadCart();  // Carica gli articoli del carrello al caricamento della pagina
});

// Funzione per caricare e visualizzare gli articoli nel carrello
function loadCart() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];  // Ottieni il carrello dal localStorage
  const cartItems = document.getElementById('cart-items');  // Div in cui verranno aggiunti gli articoli
  const totalPriceElement = document.getElementById('total-price');  // Elemento per visualizzare il totale
  let total = 0;  // Inizializza la variabile per il totale
  cartItems.innerHTML = '';  // Pulisci l'area dei cart items prima di aggiungere nuovi articoli

  cart.forEach((item, index) => {
    total += item.price;  // Aggiungi il prezzo del biglietto al totale
    const cartItem = document.createElement('div');  // Crea un div per ogni articolo
    cartItem.classList.add('cart-item');  // Aggiungi la classe cart-item

    // Aggiungi il contenuto HTML per ciascun biglietto
    cartItem.innerHTML = `
      <img src="${item.image}" alt="${item.name}" class="ticket-image">  <!-- Immagine del biglietto -->
      <p>${item.name}</p>  <!-- Nome del biglietto -->
      <p>Price: €${item.price.toFixed(2)}</p>  <!-- Prezzo del biglietto -->
      <button class="remove-button" data-index="${index}" aria-label="Remove item from cart">Remove</button>  <!-- Pulsante per rimuovere il biglietto -->
    `;

    cartItems.appendChild(cartItem);  // Aggiungi il div creato all'area dei cart items
  });

  totalPriceElement.textContent = total.toFixed(2);  // Visualizza il totale nel carrello
}

// Funzione per rimuovere un articolo dal carrello
function removeFromCart(index) {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  cart.splice(index, 1);  // Rimuovi l'elemento alla posizione specificata
  localStorage.setItem('cart', JSON.stringify(cart));  // Salva il carrello aggiornato
  loadCart();  // Ricarica il carrello per riflettere le modifiche
}

// Aggiungi l'evento di rimozione agli articoli del carrello
function setupRemoveButtons() {
  const removeButtons = document.querySelectorAll('.remove-button');
  removeButtons.forEach(button => {
    button.addEventListener('click', (event) => {
      const index = event.target.getAttribute('data-index');  // Ottieni l'indice del biglietto da rimuovere
      removeFromCart(index);  // Chiama la funzione per rimuovere l'elemento
    });
  });
}

// Assicurati di impostare i pulsanti di rimozione quando il DOM è pronto
document.addEventListener('DOMContentLoaded', () => {
  setupRemoveButtons();
});
        // Navigate to checkout page
        document.getElementById('checkout-button').addEventListener('click', () => {
            window.location.href = 'checkout.html';
        });
        document.addEventListener('DOMContentLoaded', () => {
            loadCart();
            setupRemoveButtons();
        });
    </script>
    <script>cart.js</script>
</body>
</html>
